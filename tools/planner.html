function setupEventListeners() {
    // Canvas pan events
    canvasContainer.addEventListener('mousedown', startPan);
    document.addEventListener('mousemove', doPan);
    document.addEventListener('mouseup', endPan);
    
    // General canvas events
    canvasContainer.addEventListener('click', handleCanvasClick);
    canvasContainer.addEventListener('contextmenu', handleContextMenu);
    document.addEventListener('click', hideContextMenu);
    
    // Help text close button
    const helpTextClose = document.querySelector('.help-text-close');
    if (helpTextClose) {
        helpTextClose.addEventListener('click', function() {
            document.querySelector('.help-text').style.display = 'none';
        });
    }
    
    // Search & filter
    searchBtn.addEventListener('click', performSearch);
    searchInput.addEventListener('keyup', e => {
        if (e.key === 'Enter') performSearch();
    });
    
    filterTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            filterTabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            filterStrains(this.dataset.filter);
        });
    });
    
    // Action buttons
    newDiagramBtn.addEventListener('click', newDiagram);
    saveDiagramBtn.addEventListener('click', showSaveModal);
    loadDiagramBtn.addEventListener('click', showLoadModal);
    arrangeTreeBtn.addEventListener('click', arrangeTreeLayout);
    centerViewBtn.addEventListener('click', centerView);
    
    // Cross modal
    cancelCrossBtn.addEventListener('click', () => hideModal(nameCrossModal));
    createCrossBtn.addEventListener('click', createCross);
    
    // Save modal
    cancelSaveBtn.addEventListener('click', () => hideModal(saveDiagramModal));
    confirmSaveBtn.addEventListener('click', saveDiagram);
    
    // Load modal
    cancelLoadBtn.addEventListener('click', () => hideModal(loadDiagramModal));
    confirmLoadBtn.addEventListener('click', loadSelectedDiagram);
    
    // Listeners for delete rename 
    document.getElementById('delete-plan-btn').addEventListener('click', deleteSavedPlan);
    document.getElementById('rename-plan-btn').addEventListener('click', showRenamePlanModal);
    document.getElementById('cancel-rename-btn').addEventListener('click', () => {
        hideModal(renamePlanModal);
        showModal(loadDiagramModal);
    });
    document.getElementById('confirm-rename-btn').addEventListener('click', confirmRenamePlan);				
    
    // Context menu items
    contextEdit.addEventListener('click', () => {
        // Future feature: edit node properties
        hideContextMenu();
    });
    
    contextDuplicate.addEventListener('click', () => {
        if (contextMenuTargetNode) {
            duplicateNode(contextMenuTargetNode);
        }
        hideContextMenu();
    });
    
    contextRemove.addEventListener('click', () => {
        if (contextMenuTargetNode) {
            removeNode(contextMenuTargetNode);
        }
        hideContextMenu();
    });
    
    // Window resize
    window.addEventListener('resize', updateSvgSize);
}
